{%- if theme_version_json_location %}
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>{{ _('Versions') }}</h2>
    <div class="sidebar-versions">
      <dl id="versions"></dl>
    </div>
  </div>
</div>
<script>
$(document).ready(function() {
  const this_version = '{{ release }}';
  const version_json_location = '{{ pathto(theme_version_json_location, 1) }}';
  const path_to_root = '{{ pathto('./', 1) }}';

  function addVersion(name, url) {
    const a = $('<a></a>');
    a.text(name);
    a.attr('href', path_to_root + url);
    const dd = $('<dd></dd>').append(a);
    let final = dd;
    if (name === this_version)
    {
      final = $('<strong></strong>').append(dd);
    }
    $('#versions').append(final);
  }
  $.getJSON(version_json_location, {}).done((versions) => {
    versions.forEach(version => addVersion(version['name'], version['url']));
  });
});
</script>
{%- endif %}
